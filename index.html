<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/white-uicss@1.0.3/white-uicss.min.css">
    <title>Test Pi</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <script>Pi.init({ version: "2.0", sandbox: true })</script>
    <style>
        .sub-container {
            background-image: url('./images/bg.svg');
            background-repeat: no-repeat;
            background-position: bottom;
        }
    </style>
</head>

<body>

    <div class="container">
        <header class="bg-purple p-1 text-white font-bold display-f justify-content-space-between">
            <h2>Welcome to Tryan Bill</h2>
            <p id="_user"></p>
        </header>
        <div class="sub-container">
            <div class="row align-items-center" style="height: 70vh;">
                <div class="col-6-sm col-6-md col-4-lg col-4-xl m-auto">
                    <div class="card bg-purple-light-8">
                        <h3 class="text-center text-black">Join Whitelist</h3>
                        <form class="form-group">
                            <input type="email" title="Email address" class="input-field">
                            <button class="btn text-white" style="background-color:#9900ff;" type="submit"
                                title="submit form">Subscribe</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <footer class="bg-purple text-white pb-3 pt-2">
            <div class="container">
                <div class="row gap-1">
                    <div class="col-4-sm col-4-md col-4-lg">
                        <ul>
                            <li class="font-bold mb-1">Tools</li>
                            <li><a href="#">Faqs</a></li>
                            <li><a href="#">How Tryan Bills Works.</a></li>
                        </ul>
                    </div>
                    <div class="col-4-sm col-4-md col-4-lg">
                        <ul>
                            <li class="font-bold mb-1">Useful link</li>
                            <li><a href="#">Pi coin</a></li>
                            <li><a href="#">Mine Pi</a></li>
                        </ul>
                    </div>
                </div>
                <hr class="mt-2 mb-1" />
                <p class="text-center">
                    <script>document.write(new Date().getFullYear())</script> - Tryan Bill
                </p>
            </div>
        </footer>
    </div>

    <script>
        const _user = document.getElementById('user');

        // Authenticate the user, and get permission to request payments from them:
        const scopes = ["username", 'payments'];

        // Read more about this callback in the SDK reference:
        function onIncompletePaymentFound(payment) { /* ... */ };

        window.addEventListener('onload', async () => {
            const authRes = await window.Pi.authenticate(scopes, onIncompletePaymentFound);
            try {
                document.getElementById('_user').innerHTML = "Connected";
                console.log(authRes, "Connected")
            } catch (error) {
                console.log(error, "Failed to authenticate");
                alert("unable to connect");
            }
        })


    </script>
</body>

</html>